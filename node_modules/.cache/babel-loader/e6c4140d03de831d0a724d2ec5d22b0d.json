{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/yoojinra/Desktop/apollo-client/src/components/teams.js\",\n    _s3 = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { useQuery, useMutation, gql } from '@apollo/client';\nimport './components.css';\nconst GET_TEAMS = gql`\n  query GetTeams {\n    teams {\n      id\n      manager\n      members {\n        id\n        first_name\n        last_name\n        role\n      }\n    }\n  }\n`;\nconst GET_TEAM = gql`\n  query GetTeam($id: ID!) {\n    team(id: $id) {\n      id\n      manager\n      office\n      extension_number\n      mascot\n      cleaning_duty\n      project\n    }\n  }\n`;\nconst POST_TEAM = gql`\n  mutation PostTeam($input: PostTeamInput!) {\n    postTeam(input: $input) {\n      id\n      manager\n      office\n      extension_number\n      mascot\n      cleaning_duty\n      project\n    }\n  }\n`;\nconst EDIT_TEAM = gql`\n  mutation EditTeam($id: ID!, $input: PostTeamInput!) {\n    editTeam(id: $id, input: $input) {\n      id\n      manager\n      office\n      extension_number\n      mascot\n      cleaning_duty\n      project\n    }\n  }\n`;\nconst DELETE_TEAM = gql`\n  mutation DeleteTeam($id: ID!) {\n    deleteTeam(id: $id) {\n      id\n    }\n  }\n`;\nlet refetchTeams;\n\nfunction Teams() {\n  _s3();\n\n  var _s = $RefreshSig$(),\n      _s2 = $RefreshSig$();\n\n  function execPostTeam() {\n    postTeam({\n      variables: {\n        input: inputs\n      }\n    });\n  }\n\n  const [postTeam] = useMutation(POST_TEAM, {\n    onCompleted: postTeamCompleted\n  });\n\n  function postTeamCompleted(data) {\n    console.log(data.postTeam);\n    alert(`${data.postTeam.id} 항목이 생성되었습니다.`);\n    refetchTeams();\n    setContentId(0);\n  }\n\n  function execEditTeam() {\n    editTeam({\n      variables: {\n        id: contentId,\n        input: inputs\n      }\n    });\n  }\n\n  const [editTeam] = useMutation(EDIT_TEAM, {\n    onCompleted: editTeamCompleted\n  });\n\n  function editTeamCompleted(data) {\n    console.log(data.editTeam);\n    alert(`${data.editTeam.id} 항목이 수정되었습니다.`);\n    refetchTeams();\n  }\n\n  function execDeleteTeam() {\n    if (window.confirm('이 항목을 삭제하시겠습니까?')) {\n      deleteTeam({\n        variables: {\n          id: contentId\n        }\n      });\n    }\n  }\n\n  const [deleteTeam] = useMutation(DELETE_TEAM, {\n    onCompleted: deleteTeamCompleted\n  });\n\n  function deleteTeamCompleted(data) {\n    console.log(data.deleteTeam);\n    alert(`${data.deleteTeam.id} 항목이 삭제되었습니다.`);\n    refetchTeams();\n    setContentId(0);\n  }\n\n  const [contentId, setContentId] = useState(0);\n  const [inputs, setInputs] = useState({\n    manager: '',\n    office: '',\n    extension_number: '',\n    mascot: '',\n    cleaning_duty: '',\n    project: ''\n  });\n\n  function AsideItems() {\n    _s();\n\n    const roleIcons = {\n      developer: '💻',\n      designer: '🎨',\n      planner: '📝'\n    };\n    const {\n      loading,\n      error,\n      data,\n      refetch\n    } = useQuery(GET_TEAMS);\n    refetchTeams = refetch;\n    if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"loading\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }, this);\n    if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: \"Error :(\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 23\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: data.teams.map(({\n        id,\n        manager,\n        members\n      }) => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"teamItemTitle\",\n            onClick: () => {\n              setContentId(id);\n            },\n            children: [\"Team \", id, \" : \", manager, \"'s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"teamMembers\",\n            children: members.map(({\n              id,\n              first_name,\n              last_name,\n              role\n            }) => {\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [roleIcons[role], \" \", first_name, \" \", last_name]\n              }, id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this)]\n        }, id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this);\n  }\n\n  _s(AsideItems, \"D1/SdZTYM540x1wj5x+NzEA5Uvk=\", false, function () {\n    return [useQuery];\n  });\n\n  function MainContents() {\n    _s2();\n\n    const {\n      loading,\n      error\n    } = useQuery(GET_TEAM, {\n      variables: {\n        id: contentId\n      },\n      onCompleted: data => {\n        if (contentId === 0) {\n          setInputs({\n            manager: '',\n            office: '',\n            extension_number: '',\n            mascot: '',\n            cleaning_duty: '',\n            project: ''\n          });\n        } else {\n          setInputs({\n            manager: data.team.manager,\n            office: data.team.office,\n            extension_number: data.team.extension_number,\n            mascot: data.team.mascot,\n            cleaning_duty: data.team.cleaning_duty,\n            project: data.team.project\n          });\n        }\n      }\n    });\n    if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"loading\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 25\n    }, this);\n    if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: \"Error :(\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 23\n    }, this);\n\n    function handleChange(e) {\n      const {\n        name,\n        value\n      } = e.target;\n      setInputs({ ...inputs,\n        [name]: value\n      });\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inputContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"table\", {\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [contentId !== 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: contentId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Manager\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"manager\",\n                value: inputs.manager,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Office\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"office\",\n                value: inputs.office,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Extension Number\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"extension_number\",\n                value: inputs.extension_number,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Mascot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"mascot\",\n                value: inputs.mascot,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Cleaning Duty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"cleaning_duty\",\n                value: inputs.cleaning_duty,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Project\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"project\",\n                value: inputs.project,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), contentId === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: execPostTeam,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: execEditTeam,\n          children: \"Modify\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: execDeleteTeam,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setContentId(0);\n          },\n          children: \"New\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this);\n  }\n\n  _s2(MainContents, \"ojwgO38o7Pa+jiP/qhaLIDn8+Q0=\", false, function () {\n    return [useQuery];\n  });\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"teams\",\n    className: \"component\",\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      children: AsideItems()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"contents\",\n      children: MainContents()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 309,\n    columnNumber: 5\n  }, this);\n}\n\n_s3(Teams, \"cIjFja9AEWR6vMWJpzGb0pTWejQ=\", false, function () {\n  return [useMutation, useMutation, useMutation];\n});\n\n_c = Teams;\nexport default Teams;\n\nvar _c;\n\n$RefreshReg$(_c, \"Teams\");","map":{"version":3,"sources":["/Users/yoojinra/Desktop/apollo-client/src/components/teams.js"],"names":["useState","useQuery","useMutation","gql","GET_TEAMS","GET_TEAM","POST_TEAM","EDIT_TEAM","DELETE_TEAM","refetchTeams","Teams","execPostTeam","postTeam","variables","input","inputs","onCompleted","postTeamCompleted","data","console","log","alert","id","setContentId","execEditTeam","editTeam","contentId","editTeamCompleted","execDeleteTeam","window","confirm","deleteTeam","deleteTeamCompleted","setInputs","manager","office","extension_number","mascot","cleaning_duty","project","AsideItems","roleIcons","developer","designer","planner","loading","error","refetch","teams","map","members","first_name","last_name","role","MainContents","team","handleChange","e","name","value","target"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { useQuery, useMutation, gql } from '@apollo/client';\nimport './components.css';\n\nconst GET_TEAMS = gql`\n  query GetTeams {\n    teams {\n      id\n      manager\n      members {\n        id\n        first_name\n        last_name\n        role\n      }\n    }\n  }\n`;\n\nconst GET_TEAM = gql`\n  query GetTeam($id: ID!) {\n    team(id: $id) {\n      id\n      manager\n      office\n      extension_number\n      mascot\n      cleaning_duty\n      project\n    }\n  }\n`;\n\nconst POST_TEAM = gql`\n  mutation PostTeam($input: PostTeamInput!) {\n    postTeam(input: $input) {\n      id\n      manager\n      office\n      extension_number\n      mascot\n      cleaning_duty\n      project\n    }\n  }\n`;\n\nconst EDIT_TEAM = gql`\n  mutation EditTeam($id: ID!, $input: PostTeamInput!) {\n    editTeam(id: $id, input: $input) {\n      id\n      manager\n      office\n      extension_number\n      mascot\n      cleaning_duty\n      project\n    }\n  }\n`;\n\nconst DELETE_TEAM = gql`\n  mutation DeleteTeam($id: ID!) {\n    deleteTeam(id: $id) {\n      id\n    }\n  }\n`;\n\nlet refetchTeams;\n\nfunction Teams() {\n  function execPostTeam() {\n    postTeam({\n      variables: { input: inputs },\n    });\n  }\n\n  const [postTeam] = useMutation(POST_TEAM, { onCompleted: postTeamCompleted });\n\n  function postTeamCompleted(data) {\n    console.log(data.postTeam);\n    alert(`${data.postTeam.id} 항목이 생성되었습니다.`);\n    refetchTeams();\n    setContentId(0);\n  }\n\n  function execEditTeam() {\n    editTeam({\n      variables: {\n        id: contentId,\n        input: inputs,\n      },\n    });\n  }\n  const [editTeam] = useMutation(EDIT_TEAM, { onCompleted: editTeamCompleted });\n\n  function editTeamCompleted(data) {\n    console.log(data.editTeam);\n    alert(`${data.editTeam.id} 항목이 수정되었습니다.`);\n    refetchTeams();\n  }\n\n  function execDeleteTeam() {\n    if (window.confirm('이 항목을 삭제하시겠습니까?')) {\n      deleteTeam({ variables: { id: contentId } });\n    }\n  }\n\n  const [deleteTeam] = useMutation(DELETE_TEAM, {\n    onCompleted: deleteTeamCompleted,\n  });\n\n  function deleteTeamCompleted(data) {\n    console.log(data.deleteTeam);\n    alert(`${data.deleteTeam.id} 항목이 삭제되었습니다.`);\n    refetchTeams();\n    setContentId(0);\n  }\n  const [contentId, setContentId] = useState(0);\n  const [inputs, setInputs] = useState({\n    manager: '',\n    office: '',\n    extension_number: '',\n    mascot: '',\n    cleaning_duty: '',\n    project: '',\n  });\n\n  function AsideItems() {\n    const roleIcons = {\n      developer: '💻',\n      designer: '🎨',\n      planner: '📝',\n    };\n\n    const { loading, error, data, refetch } = useQuery(GET_TEAMS);\n    refetchTeams = refetch;\n\n    if (loading) return <p className=\"loading\">Loading...</p>;\n    if (error) return <p className=\"error\">Error :(</p>;\n\n    return (\n      <ul>\n        {data.teams.map(({ id, manager, members }) => {\n          return (\n            <li key={id}>\n              <span\n                className=\"teamItemTitle\"\n                onClick={() => {\n                  setContentId(id);\n                }}\n              >\n                Team {id} : {manager}'s\n              </span>\n              <ul className=\"teamMembers\">\n                {members.map(({ id, first_name, last_name, role }) => {\n                  return (\n                    <li key={id}>\n                      {roleIcons[role]} {first_name} {last_name}\n                    </li>\n                  );\n                })}\n              </ul>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  function MainContents() {\n    const { loading, error } = useQuery(GET_TEAM, {\n      variables: { id: contentId },\n      onCompleted: (data) => {\n        if (contentId === 0) {\n          setInputs({\n            manager: '',\n            office: '',\n            extension_number: '',\n            mascot: '',\n            cleaning_duty: '',\n            project: '',\n          });\n        } else {\n          setInputs({\n            manager: data.team.manager,\n            office: data.team.office,\n            extension_number: data.team.extension_number,\n            mascot: data.team.mascot,\n            cleaning_duty: data.team.cleaning_duty,\n            project: data.team.project,\n          });\n        }\n      },\n    });\n\n    if (loading) return <p className=\"loading\">Loading...</p>;\n    if (error) return <p className=\"error\">Error :(</p>;\n\n    function handleChange(e) {\n      const { name, value } = e.target;\n      setInputs({\n        ...inputs,\n        [name]: value,\n      });\n    }\n\n    return (\n      <div className=\"inputContainer\">\n        <table>\n          <tbody>\n            {contentId !== 0 && (\n              <tr>\n                <td>Id</td>\n                <td>{contentId}</td>\n              </tr>\n            )}\n            <tr>\n              <td>Manager</td>\n              <td>\n                <input\n                  type=\"text\"\n                  name=\"manager\"\n                  value={inputs.manager}\n                  onChange={handleChange}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td>Office</td>\n              <td>\n                <input\n                  type=\"text\"\n                  name=\"office\"\n                  value={inputs.office}\n                  onChange={handleChange}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td>Extension Number</td>\n              <td>\n                <input\n                  type=\"text\"\n                  name=\"extension_number\"\n                  value={inputs.extension_number}\n                  onChange={handleChange}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td>Mascot</td>\n              <td>\n                <input\n                  type=\"text\"\n                  name=\"mascot\"\n                  value={inputs.mascot}\n                  onChange={handleChange}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td>Cleaning Duty</td>\n              <td>\n                <input\n                  type=\"text\"\n                  name=\"cleaning_duty\"\n                  value={inputs.cleaning_duty}\n                  onChange={handleChange}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td>Project</td>\n              <td>\n                <input\n                  type=\"text\"\n                  name=\"project\"\n                  value={inputs.project}\n                  onChange={handleChange}\n                />\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        {contentId === 0 ? (\n          <div className=\"buttons\">\n            <button onClick={execPostTeam}>Submit</button>\n          </div>\n        ) : (\n          <div className=\"buttons\">\n            <button onClick={execEditTeam}>Modify</button>\n            <button onClick={execDeleteTeam}>Delete</button>\n            <button\n              onClick={() => {\n                setContentId(0);\n              }}\n            >\n              New\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div id=\"teams\" className=\"component\">\n      <aside>{AsideItems()}</aside>\n      <section className=\"contents\">{MainContents()}</section>\n    </div>\n  );\n}\n\nexport default Teams;\n"]},"metadata":{},"sourceType":"module"}